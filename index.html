<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FISIOPRO ‚Äî UI</title>
  <style>
    :root{
      --bg:#f3f5f7; --card:#fff; --text:#0f172a; --muted:#64748b; --line:#e6eaf0;
      --shadow:0 8px 24px rgba(2,6,23,.08); --radius:18px;
      --brand:#2ea08a; --brand2:#1f7e6c;
      --orange:#ff7a33; --yellow:#f6d84a; --red:#ef4444; --blue:#3b82f6; --gray:#94a3b8;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);color:var(--text)}
    .app{max-width:1280px;margin:0 auto;padding:18px 18px 28px}
    .topbar{
      background:linear-gradient(180deg,var(--brand),var(--brand2));
      color:#fff;border-radius:22px;padding:18px;box-shadow:var(--shadow);
      display:flex;align-items:center;justify-content:space-between;gap:12px
    }
    .left{display:flex;align-items:center;gap:12px;min-width:0}
    .badge{width:40px;height:40px;border-radius:999px;display:grid;place-items:center;
      background:rgba(255,255,255,.18);border:1px solid rgba(255,255,255,.22);font-weight:800}
    .pt-title{min-width:0}
    .pt-title h1{font-size:18px;margin:0 0 2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .pt-title p{margin:0;font-size:12px;opacity:.92}
    .top-actions{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}
    .pill{border-radius:999px;padding:10px 14px;font-size:12px;font-weight:800;
      border:1px solid rgba(255,255,255,.28);background:rgba(255,255,255,.14);color:#fff;cursor:pointer}
    .pill.orange{background:rgba(255,255,255,.92);color:#0b3b32;border-color:transparent}
    .pill.ghost{background:transparent;border:1px solid rgba(255,255,255,.35)}
    .layout{margin-top:14px;display:grid;grid-template-columns:340px 1fr;gap:14px;align-items:start}
    .side,.section{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);border:1px solid var(--line);overflow:hidden}
    .side .head{padding:14px;border-bottom:1px solid var(--line);display:flex;align-items:center;justify-content:space-between}
    .side .head h2{margin:0;font-size:14px}
    .btn{border-radius:999px;padding:10px 12px;font-size:12px;font-weight:900;border:1px solid var(--line);background:#fff;cursor:pointer}
    .btn.primary{background:rgba(46,160,138,.12);border-color:rgba(46,160,138,.28);color:#0b3b32}
    .search{width:100%;border:1px solid var(--line);border-radius:12px;padding:10px 12px;font-size:12px;outline:none;background:#fbfcfe}
    .new-case{padding:12px 14px;border-bottom:1px solid var(--line);background:linear-gradient(180deg,#fff,#fbfcfd)}
    .cases{padding:10px;display:flex;flex-direction:column;gap:10px;max-height:calc(100vh - 220px);overflow:auto}
    .case-card{border:1px solid var(--line);border-radius:16px;padding:12px;background:#fff;cursor:pointer}
    .case-card.active{border-color:rgba(46,160,138,.55);box-shadow:0 10px 24px rgba(46,160,138,.12)}
    .case-title{font-weight:900;font-size:13px;margin:0 0 4px}
    .case-sub{font-size:12px;color:var(--muted);margin:0}
    .chips{display:flex;gap:6px;flex-wrap:wrap;margin-top:10px}
    .chip{font-size:11px;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:#fbfcfe}
    .main{display:flex;flex-direction:column;gap:14px}
    .shead{padding:12px 16px;border-bottom:1px solid var(--line);display:flex;align-items:center;justify-content:space-between;
      background:linear-gradient(180deg,#fff,#fbfcfe)}
    .title{display:flex;align-items:center;gap:10px}
    .icon{width:30px;height:30px;border-radius:12px;display:grid;place-items:center;background:rgba(46,160,138,.12);
      border:1px solid rgba(46,160,138,.18);color:#0b3b32;font-weight:900}
    .shead h3{margin:0;font-size:14px}
    .meta{font-size:12px;color:var(--muted);white-space:nowrap}
    .sbody{padding:14px 16px 16px}
    textarea{width:100%;min-height:110px;resize:vertical;padding:12px;border-radius:14px;border:1px solid var(--line);
      outline:none;font-size:13px;line-height:1.35;background:#fbfcfe}
    textarea:focus{border-color:rgba(46,160,138,.55);box-shadow:0 0 0 4px rgba(46,160,138,.10);background:#fff}
    .grid-2{display:grid;grid-template-columns:1.2fr 1fr;gap:14px}
    .body-wrap{display:flex;gap:12px;flex-wrap:wrap;justify-content:flex-end}
    .body-card{border:1px solid var(--line);border-radius:18px;padding:10px;background:#fff;width:250px}
    .label{font-size:12px;color:var(--muted);margin:2px 2px 8px;display:flex;justify-content:space-between;gap:10px}
    .legend{display:flex;gap:6px;flex-wrap:wrap;justify-content:flex-end}
    .dot{width:10px;height:10px;border-radius:999px;display:inline-block;border:2px solid rgba(15,23,42,.15)}
    .dot.red{background:var(--red)} .dot.yellow{background:var(--yellow)} .dot.blue{background:var(--blue)}
    .legend span{font-size:11px;color:var(--muted);display:inline-flex;align-items:center;gap:6px}
    .bodymap{position:relative;width:100%;aspect-ratio:2/3;border-radius:16px;background:linear-gradient(180deg,#f8fafc,#eef2f7);
      border:1px solid var(--line);overflow:hidden}
    .body-sil{position:absolute;inset:0;display:grid;place-items:center;opacity:.9;pointer-events:none}
    .pt{position:absolute;width:26px;height:26px;border-radius:999px;border:2px solid rgba(255,255,255,.9);
      box-shadow:0 10px 18px rgba(2,6,23,.12);cursor:pointer;transform:translate(-50%,-50%);
      background:rgba(255,255,255,.65);display:grid;place-items:center}
    .pt::after{content:"";width:10px;height:10px;border-radius:999px;background:var(--gray);display:block}
    .pt.s0::after{background:var(--gray)} .pt.s1::after{background:var(--yellow)}
    .pt.s2::after{background:var(--red)} .pt.s3::after{background:var(--blue)}
    details{border:1px solid var(--line);border-radius:16px;background:#fff;overflow:hidden}
    summary{list-style:none;cursor:pointer;padding:12px 14px;display:flex;align-items:center;justify-content:space-between;
      background:linear-gradient(180deg,#fff,#fbfcfe);font-weight:900;font-size:13px}
    summary::-webkit-details-marker{display:none}
    .tests{padding:12px 14px 14px;display:flex;flex-direction:column;gap:10px}
    .test-row{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px;border:1px solid var(--line);
      border-radius:14px;background:#fbfcfe}
    .test-name{font-size:13px;font-weight:900}
    .tri{display:flex;gap:8px}
    .tri button{width:32px;height:32px;border-radius:999px;border:1px solid var(--line);background:#fff;cursor:pointer;font-weight:900}
    .tri button.active{border-color:transparent;box-shadow:0 10px 18px rgba(2,6,23,.10)}
    .tri button[data-v="ne"].active{background:rgba(148,163,184,.22)}
    .tri button[data-v="neg"].active{background:rgba(34,197,94,.18)}
    .tri button[data-v="pos"].active{background:rgba(239,68,68,.18)}
    .savebar{position:sticky;bottom:14px;display:flex;justify-content:flex-end;gap:10px;z-index:10}
    .btn.save{background:var(--brand);color:#fff;border-color:transparent;box-shadow:0 10px 22px rgba(46,160,138,.24)}
    @media (max-width:980px){.layout{grid-template-columns:1fr}.grid-2{grid-template-columns:1fr}.body-wrap{justify-content:flex-start}.body-card{width:100%;max-width:360px}}
  </style>
</head>
<body>
  <div class="app">
    <div class="topbar">
      <div class="left">
        <div class="badge">AF</div>
        <div class="pt-title">
          <h1>FISIOPRO ‚Äî Dettagli paziente</h1>
          <p>Storia clinica ¬∑ Caso: <strong>Gonalgia dx</strong> ¬∑ Operatore: <strong>AF</strong></p>
        </div>
      </div>
      <div class="top-actions">
        <div class="pill ghost" onclick="alert('Agenda (mock)')">üóìÔ∏è Agenda</div>
        <div class="pill orange" onclick="alert('Nuova valutazione (mock)')">‚ûï Nuova valutazione</div>
        <div class="pill" onclick="alert('Nuovo trattamento (mock)')">‚ûï Nuovo trattamento</div>
      </div>
    </div>

    <div class="layout">
      <aside class="side">
        <div class="head">
          <h2>Storia clinica</h2>
          <button class="btn primary" onclick="alert('Nuovo caso (mock)')">üë®‚Äç‚öïÔ∏è Nuovo caso</button>
        </div>
        <div class="new-case"><input class="search" placeholder="Cerca caso clinico (mock)..." /></div>
        <div class="cases">
          <div class="case-card active">
            <div class="case-title">11/12/2025 ‚Äî Gonalgia dx</div>
            <p class="case-sub">Problema principale: tendinopatia rotulea</p>
            <div class="chips"><span class="chip">Valutazioni: 2</span><span class="chip">Trattamenti: 5</span></div>
          </div>
          <div class="case-card">
            <div class="case-title">22/09/2025 ‚Äî Spalla sx</div>
            <p class="case-sub">Problema principale: impingement</p>
            <div class="chips"><span class="chip">Valutazioni: 1</span><span class="chip">Trattamenti: 3</span></div>
          </div>
        </div>
      </aside>

      <main class="main">
        <section class="section">
          <div class="shead">
            <div class="title"><div class="icon">‚úì</div><h3>Valutazione</h3></div>
            <div class="meta">Seduta: <strong>Valutazione</strong> ¬∑ Data: <strong>12/12/2025</strong></div>
          </div>
          <div class="sbody">
            <div class="grid-2">
              <div>
                <textarea placeholder="Scrivi la valutazione (testo libero)..."></textarea>
              </div>
              <div class="body-wrap">
                <div class="body-card">
                  <div class="label">
                    <span><strong>Body map</strong></span>
                    <span class="legend">
                      <span><i class="dot red"></i> principale</span>
                      <span><i class="dot yellow"></i> sintomo</span>
                      <span><i class="dot blue"></i> secondario</span>
                    </span>
                  </div>
                  <div class="bodymap" id="map">
                    <div class="body-sil">
                      <svg viewBox="0 0 220 320" width="180" height="260" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M110 22c18 0 34 16 34 34 0 14-8 26-20 31v18c0 7 5 12 12 12h18c10 0 18 8 18 18v22c0 12-9 22-22 22h-7l-4 46c-1 14-12 25-26 25h-6c-14 0-25-11-26-25l-4-46h-7c-13 0-22-10-22-22v-22c0-10 8-18 18-18h18c7 0 12-5 12-12V87c-12-5-20-17-20-31 0-18 16-34 34-34Z"
                          fill="#E8EDF4" stroke="#D6DEEA" stroke-width="2"/>
                      </svg>
                    </div>
                    <div class="pt s0" data-id="kneeR" style="left:55%;top:72%" title="Ginocchio dx"></div>
                    <div class="pt s0" data-id="kneeL" style="left:45%;top:72%" title="Ginocchio sx"></div>
                    <div class="pt s0" data-id="shoulderR" style="left:62%;top:33%" title="Spalla dx"></div>
                    <div class="pt s0" data-id="lumbar" style="left:50%;top:55%" title="Lombare"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section class="section">
          <div class="shead">
            <div class="title"><div class="icon">‚åÅ</div><h3>Test clinici</h3></div>
            <div class="meta">Tri-state (mock)</div>
          </div>
          <div class="sbody" style="display:flex;flex-direction:column;gap:10px">
            <details open>
              <summary><span>Ginocchio</span><span class="meta">LCA ¬∑ Menisco</span></summary>
              <div class="tests">
                <div class="test-row" data-test="lachman">
                  <div><div class="test-name">Lachman</div><div class="case-sub">LCA</div></div>
                  <div class="tri">
                    <button data-v="ne" class="active">n/e</button>
                    <button data-v="neg">‚àí</button>
                    <button data-v="pos">+</button>
                  </div>
                </div>
                <div class="test-row" data-test="mcmurray">
                  <div><div class="test-name">McMurray</div><div class="case-sub">Menisco</div></div>
                  <div class="tri">
                    <button data-v="ne" class="active">n/e</button>
                    <button data-v="neg">‚àí</button>
                    <button data-v="pos">+</button>
                  </div>
                </div>
              </div>
            </details>

            <details>
              <summary><span>Spalla</span><span class="meta">Cuffia ¬∑ Impingement</span></summary>
              <div class="tests">
                <div class="test-row" data-test="jobe">
                  <div><div class="test-name">Jobe</div><div class="case-sub">Sovraspinato</div></div>
                  <div class="tri">
                    <button data-v="ne" class="active">n/e</button>
                    <button data-v="neg">‚àí</button>
                    <button data-v="pos">+</button>
                  </div>
                </div>
              </div>
            </details>
          </div>
        </section>

        <section class="section">
          <div class="shead"><div class="title"><div class="icon">‚ù§</div><h3>Trattamento eseguito</h3></div><div class="meta"></div></div>
          <div class="sbody"><textarea placeholder="Scrivi il trattamento eseguito..."></textarea></div>
        </section>

        <section class="section">
          <div class="shead"><div class="title"><div class="icon">üìå</div><h3>Indicazioni prossima seduta</h3></div><div class="meta"></div></div>
          <div class="sbody"><textarea placeholder="Indicazioni prossima seduta..."></textarea></div>
        </section>

        <div class="savebar">
          <button class="btn" onclick="location.reload()">Annulla</button>
          <button class="btn save" onclick="alert('Salva (mock)')">Salva</button>
        </div>
      </main>
    </div>
  </div>

  <script>
    // Body map cycle states: 0 none, 1 symptom, 2 primary, 3 secondary
    const mapStates = {};
    const cls = ["s0","s1","s2","s3"];
    document.querySelectorAll(".pt").forEach(el=>{
      const id = el.dataset.id;
      mapStates[id]=0;
      el.addEventListener("click", ()=>{
        mapStates[id]=(mapStates[id]+1)%4;
        el.classList.remove(...cls);
        el.classList.add("s"+mapStates[id]);
      });
    });

    // Tests tri-state
    document.querySelectorAll(".test-row").forEach(row=>{
      row.querySelectorAll(".tri button").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          row.querySelectorAll(".tri button").forEach(b=>b.classList.remove("active"));
          btn.classList.add("active");
        });
      });
    });
  </script>
</body>
</html>
